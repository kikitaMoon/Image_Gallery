{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///workspace/demo-gallery/src/app/api/media/%5Bid%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { readFile, writeFile, unlink } from \"fs/promises\";\nimport { existsSync } from \"fs\";\nimport path from \"path\";\n\nconst DATA_DIR = path.join(process.cwd(), \"data\");\nconst MEDIA_FILE = path.join(DATA_DIR, \"media.json\");\n\nasync function getMediaItems() {\n  if (!existsSync(MEDIA_FILE)) {\n    return [];\n  }\n  const data = await readFile(MEDIA_FILE, \"utf-8\");\n  return JSON.parse(data);\n}\n\nasync function saveMediaItems(items: any[]) {\n  await writeFile(MEDIA_FILE, JSON.stringify(items, null, 2));\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const { id } = params;\n    \n    if (!id) {\n      return NextResponse.json(\n        { error: \"Media ID is required\" },\n        { status: 400 }\n      );\n    }\n\n    const mediaItems = await getMediaItems();\n    const itemToDelete = mediaItems.find((item: any) => item.id === id);\n    \n    if (!itemToDelete) {\n      return NextResponse.json(\n        { error: \"Media item not found\" },\n        { status: 404 }\n      );\n    }\n\n    // Don't delete demo files, only uploaded ones\n    if (!itemToDelete.id.startsWith(\"demo-\")) {\n      // Delete physical file\n      const filePath = path.join(process.cwd(), \"public\", itemToDelete.src);\n      if (existsSync(filePath)) {\n        await unlink(filePath);\n      }\n    }\n\n    // Remove from database\n    const updatedItems = mediaItems.filter((item: any) => item.id !== id);\n    await saveMediaItems(updatedItems);\n\n    return NextResponse.json({\n      success: true,\n      message: \"Media item deleted successfully\",\n      media: updatedItems.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\n    });\n  } catch (error) {\n    console.error(\"Delete media error:\", error);\n    return NextResponse.json(\n      { error: \"Failed to delete media item\" },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAC1C,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,UAAU;AAEvC,eAAe;IACb,IAAI,CAAC,IAAA,2GAAU,EAAC,aAAa;QAC3B,OAAO,EAAE;IACX;IACA,MAAM,OAAO,MAAM,IAAA,iIAAQ,EAAC,YAAY;IACxC,OAAO,KAAK,KAAK,CAAC;AACpB;AAEA,eAAe,eAAe,KAAY;IACxC,MAAM,IAAA,kIAAS,EAAC,YAAY,KAAK,SAAS,CAAC,OAAO,MAAM;AAC1D;AAEO,eAAe,OACpB,OAAoB,EACpB,EAAE,MAAM,EAA8B;IAEtC,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG;QAEf,IAAI,CAAC,IAAI;YACP,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuB,GAChC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,aAAa,MAAM;QACzB,MAAM,eAAe,WAAW,IAAI,CAAC,CAAC,OAAc,KAAK,EAAE,KAAK;QAEhE,IAAI,CAAC,cAAc;YACjB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuB,GAChC;gBAAE,QAAQ;YAAI;QAElB;QAEA,8CAA8C;QAC9C,IAAI,CAAC,aAAa,EAAE,CAAC,UAAU,CAAC,UAAU;YACxC,uBAAuB;YACvB,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,UAAU,aAAa,GAAG;YACpE,IAAI,IAAA,2GAAU,EAAC,WAAW;gBACxB,MAAM,IAAA,+HAAM,EAAC;YACf;QACF;QAEA,uBAAuB;QACvB,MAAM,eAAe,WAAW,MAAM,CAAC,CAAC,OAAc,KAAK,EAAE,KAAK;QAClE,MAAM,eAAe;QAErB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,OAAO,aAAa,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;QACpG;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA8B,GACvC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}