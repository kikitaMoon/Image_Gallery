{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///workspace/demo-gallery/src/app/api/media/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { readdir, stat } from \"fs/promises\";\nimport { existsSync } from \"fs\";\nimport path from \"path\";\n\nconst SHARED_RESOURCES_PATH = path.join(process.cwd(), \"..\", \"demo-gallery-deployment\", \"resources\");\nconst IMAGES_DIR = path.join(SHARED_RESOURCES_PATH, \"images\");\nconst VIDEOS_DIR = path.join(SHARED_RESOURCES_PATH, \"videos\");\n\n// Supported file extensions\nconst IMAGE_EXTENSIONS = [\".jpg\", \".jpeg\", \".png\", \".gif\", \".webp\", \".bmp\", \".svg\"];\nconst VIDEO_EXTENSIONS = [\".mp4\", \".webm\", \".ogg\", \".avi\", \".mov\", \".wmv\", \".flv\", \".mkv\"];\n\n// Scan directory for media files\nasync function scanMediaFiles() {\n  const mediaItems: any[] = [];\n  \n  // Scan images directory\n  if (existsSync(IMAGES_DIR)) {\n    try {\n      const imageFiles = await readdir(IMAGES_DIR);\n      for (const file of imageFiles) {\n        const ext = path.extname(file).toLowerCase();\n        if (IMAGE_EXTENSIONS.includes(ext)) {\n          const filePath = path.join(IMAGES_DIR, file);\n          const stats = await stat(filePath);\n          \n          mediaItems.push({\n            id: path.basename(file, ext).replace(/[^a-zA-Z0-9]/g, \"-\"),\n            type: \"image\",\n            src: `/resources/images/${file}`,\n            title: path.basename(file, ext).replace(/[-_]/g, \" \"),\n            description: `Image file (${ext.slice(1).toUpperCase()})`,\n            createdAt: stats.mtime.toISOString(),\n            size: stats.size,\n            originalName: file,\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\"Error scanning images directory:\", error);\n    }\n  }\n  \n  // Scan videos directory\n  if (existsSync(VIDEOS_DIR)) {\n    try {\n      const videoFiles = await readdir(VIDEOS_DIR);\n      for (const file of videoFiles) {\n        const ext = path.extname(file).toLowerCase();\n        if (VIDEO_EXTENSIONS.includes(ext)) {\n          const filePath = path.join(VIDEOS_DIR, file);\n          const stats = await stat(filePath);\n          \n          mediaItems.push({\n            id: path.basename(file, ext).replace(/[^a-zA-Z0-9]/g, \"-\"),\n            type: \"video\",\n            src: `/resources/videos/${file}`,\n            title: path.basename(file, ext).replace(/[-_]/g, \" \"),\n            description: `Video file (${ext.slice(1).toUpperCase()})`,\n            createdAt: stats.mtime.toISOString(),\n            size: stats.size,\n            originalName: file,\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\"Error scanning videos directory:\", error);\n    }\n  }\n  \n  // Sort by creation time (newest first)\n  return mediaItems.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n}\n\nexport async function GET() {\n  try {\n    const mediaItems = await scanMediaFiles();\n    return NextResponse.json({\n      success: true,\n      media: mediaItems,\n      total: mediaItems.length,\n      images: mediaItems.filter(item => item.type === \"image\").length,\n      videos: mediaItems.filter(item => item.type === \"video\").length,\n    });\n  } catch (error) {\n    console.error(\"Get media error:\", error);\n    return NextResponse.json(\n      { error: \"Failed to get media items\" },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":"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","debugId":null}}]
}